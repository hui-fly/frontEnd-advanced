# å¦‚ä½•å»ºç«‹è‡ªå·±çš„ç»„ä»¶åº“

https://www.jb51.net/article/148692.htm

## npmå‘åŒ…

1. é¦–å…ˆä½ è¦åœ¨npmjsä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·
2. æŸ¥çœ‹ä½ çš„.npmrcè®¾ç½®ï¼Œç¡®ä¿ä½ çš„registryæ˜¯www.npmjs.com/, å¦‚æœæ˜¯ä¸€ä¸ªå…¶ä»–æºï¼Œå¯ä»¥ä½¿ç”¨nrmå·¥å…·åˆ‡æ¢æº
3. åœ¨ç»ˆç«¯npm loginï¼Œç™»å½•ä½ çš„è´¦å·
 
## package.jsonå­—æ®µè§£é‡Š
nameå°±æ˜¯å‘å¸ƒåˆ°npmä¸Šçš„åŒ…åï¼Œä¹Ÿå³åˆ«äººå®‰è£…æ—¶è¾“å…¥çš„åå­—yarn add ${name}, åŒ…ååº”è¯¥æ˜¯kebab-case, å³è‹±æ–‡å•è¯å…¨å°å†™ï¼Œä¸­åˆ’çº¿åˆ†å‰²(lower case and dash-separated)
versionæ˜¯è¯­ä¹‰åŒ–çš„ï¼Œmajor.minor.patch. å¦‚æœæ˜¯majorå˜åŠ¨ï¼Œé€šå¸¸æ„å‘³ç€ä¸å…¼å®¹çš„ä¿®æ”¹; å¦‚æœæ˜¯minorï¼Œæ„å‘³ç€æ·»åŠ å‘åå…¼å®¹çš„æ–°åŠŸèƒ½ï¼Œå¦‚æœæ˜¯patch, æ„å‘³ç€bugçš„ä¿®å¤ã€‚
descriptionæ˜¯å¯¹åŒ…çš„æè¿°ï¼Œåœ¨npmjs.comä¸Šæœç´¢æ—¶ä¼šæ˜¾ç¤ºï¼Œæœ‰åŠ©äºç”¨æˆ·åœ¨æœç´¢æ—¶è¿›è¡Œç­›é€‰
keywords åŒæ ·ä¹Ÿæ˜¯å¸®åŠ©ç”¨æˆ·æŸ¥æ‰¾åˆ°ä½ çš„åŒ…
authorçš„æ ¼å¼ä¸€èˆ¬æ˜¯${your name} ${email}, å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªgithubåœ°å€
licenseå¯èƒ½å¾ˆå¤šäººä¼šå¿½ç•¥ï¼Œæœ€å¥½ä¹Ÿå†™ä¸Šå»ã€‚è‡³äºç”¨å“ªä¸ªï¼Œvueçš„å®˜æ–¹é¡¹ç›®å…¨æ˜¯MITï¼Œå› æ­¤æˆ‘ä¹Ÿæ˜¯MITï¼Œä¸çº ç»“
repositoryçš„æ ¼å¼å‚è€ƒå¦‚ä¸‹ï¼š
```
"repository": {
  "type": "git",
  "url": "https://github.com/FEMessage/el-data-table.git"
}
```
mainå®šä¹‰äº†åŒ…çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨NodeJsç¯å¢ƒï¼Œè¯­å¥import pkg from 'package-name'æ—¶ï¼Œå…¶å®å¯¼å…¥çš„å°±æ˜¯mainå®šä¹‰çš„æ–‡ä»¶ï¼Œå®ƒå¯ä»¥æ˜¯CommonJsæ ¼å¼çš„, ä¹Ÿå¯ä»¥æ˜¯umdæ ¼å¼
scripts ä¸ºäº†é˜²æ­¢å‡ºç°å‘åŒ…å‰å¿˜è®°æ„å»ºçš„ä¹Œé¾™äº‹ä»¶ï¼Œå®šä¹‰ä¸€ä¸‹å‘å¸ƒå‰çš„è„šæœ¬, è¿™æ ·æ¯æ¬¡æ‰§è¡Œnpm publishå‰éƒ½ä¼šå…ˆæ‰§è¡Œnpm run build
```
"prepublishOnly": "npm run build"
```
engines å¯ä»¥å‘Šè¯‰ç”¨æˆ·è¿è¡Œä½ çš„åŒ…å¯¹NodeJsç‰ˆæœ¬çš„è¦æ±‚ï¼Œè¿™æ˜¯éå¸¸é‡è¦çš„ï¼Œä¸ç„¶ä½ ä½¿ç”¨äº†NodeJsæ–°ç‰ˆæœ¬ç‰¹æ€§ï¼Œå´æ²¡æœ‰å®šä¹‰è¯¥å­—æ®µï¼Œå¯¼è‡´ä½ç‰ˆæœ¬NodeJsç”¨æˆ·è¿è¡ŒæŠ¥é”™ï¼Œè®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚
## å®šä¹‰ä¾èµ–
å½“ä½ å¼€å‘ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œæ¯”å¦‚ä¸€ä¸ªé™æ€ç½‘ç«™æˆ–ä¸€ä¸ªå•é¢åº”ç”¨ï¼Œdependencieså’ŒdevDependencieså¹¶æ²¡æœ‰å¤ªå¤šåŒºåˆ«ï¼Œå› ä¸ºä½ npm install æˆ– yarnæ—¶ï¼Œè¿™äº›ä¾èµ–éƒ½ä¼šä¸‹è½½ä¸‹æ¥ï¼Œå› ä¸ºä½ æ˜¯åœ¨å¼€å‘ã€‚
ä½†å¯¹äºå‘å¸ƒåˆ°npmçš„åŒ…åˆ™ä¸åŒï¼š
dependencies æ˜¯è¿è¡Œä½ çš„åŒ…å¿…é¡»å®‰è£…çš„ä¾èµ–ï¼Œå³å½“ç”¨æˆ·yarn add my-awesome-packageæ—¶ï¼Œè¿™äº›ä¾èµ–ä¹Ÿä¼šä¸‹è½½ã€‚devDependencies æ˜¯å¼€å‘ä½ çš„åŒ…æ—¶éœ€è¦å®‰è£…çš„ä¾èµ–ï¼Œæ¯”å¦‚eslint, jestç­‰å¼€å‘å·¥å…·ï¼Œå½“ç”¨æˆ·yarn add my-awesome-package æ—¶ï¼Œè¿™äº›ä¾èµ–å¹¶ä¸ä¼šä¸‹è½½ï¼
peerDependencies ä¸€èˆ¬ç”¨äºå¼€å‘æ’ä»¶çš„åœºæ™¯ï¼Œå®ƒè¦æ±‚ç”¨æˆ·å¿…é¡»é¢„å…ˆå®‰è£…äº†æŸäº›ä¾èµ–ã€‚æ¯”å¦‚å¼€å‘webpackçš„æ’ä»¶ï¼Œå¦‚æœä½ æŠŠå¯¹webpackçš„ä¾èµ–å®šä¹‰æˆdependencies, å¦‚æœç”¨æˆ·å®‰è£…çš„webpackè·Ÿdependenciesé‡Œçš„minorç‰ˆæœ¬ä¸ä¸€è‡´, åˆ™ç”¨æˆ·yarn add my-webpack-pluginæ—¶ä¼šæŠŠdependencieså®šä¹‰çš„webpackä¹Ÿä¸‹è½½ä¸‹æ¥ï¼Œä¹Ÿå³ç”¨æˆ·ä¼šå®‰è£…ä¸¤ä¸ªmajorç‰ˆæœ¬ç›¸åŒçš„webpack, è¿™å°±ä¸åˆé€‚äº†ã€‚
æ‰€ä»¥è¯´ï¼Œå®šä¹‰å¥½ä½ çš„åŒ…çš„ä¾èµ–ï¼Œå¯ä»¥è®©ç”¨æˆ·å®‰è£…ä½¿ç”¨ä½ çš„åŒ…æ—¶å°‘ç‚¹å›°æƒ‘ï¼Œå¤šäº›æ„‰æ‚¦ã€‚
## å¿½ç•¥æ–‡ä»¶
å¦‚æœæœ‰ .gitignoreæ–‡ä»¶ï¼Œåˆ™å‘å¸ƒæ—¶ä¼šå¿½ç•¥ .gitignoreä¸­å®šä¹‰çš„æ–‡ä»¶;  ä¹Ÿå³è¿™äº›æ–‡ä»¶ä¸éœ€è¦åœ¨.npmignoreé‡æ–°å®šä¹‰ã€‚å¦‚æœç”¨.gitignoreå¿½ç•¥äº†distç›®å½•ï¼Œä½†å‘åŒ…æ—¶åˆéœ€è¦å‘å¸ƒdistç›®å½•ï¼Œæ­¤æ—¶å¯ä»¥åœ¨package.jsonå®šä¹‰fileså­—æ®µï¼Œè¿™æ˜¯ä¸€ä¸ªç™½åå•ï¼Œé‡Œé¢çš„æ–‡ä»¶éƒ½ä¼šè¢«å‘å¸ƒå‡ºå»
```
"files": [
  "dist"
]
```
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­æ–‡ä»¶å¤¹.gitignoreæˆ–.npmignoreåŒæ ·æœ‰æ•ˆï¼Œè€Œå®ƒä»¬ä¼šè¦†ç›–fileså­—æ®µ
å¦å¤–ï¼Œæœ‰äº›æ–‡ä»¶æ— è®ºå¦‚ä½•è®¾ç½®ï¼Œéƒ½ä¸ä¼šå‘å¸ƒå‡ºå»ï¼š
node_modules
.git(åŒ…æ‹¬.gitignore)
## README.md
åˆ«å¿˜äº†è¿™ä¸ªæ–‡ä»¶ï¼Œå†™ä¸‹ä¸åŒ…ç›¸å…³çš„æ›´å…·ä½“çš„ä¿¡æ¯ï¼Œå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªåŒ…æœ‰å“ªäº›åŠŸèƒ½ï¼Œå¦‚ä½•ä½¿ç”¨ã€‚è¿™å¾ˆé‡è¦ï¼Œç”¨æˆ·ä¸ä¼šä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰æ–‡æ¡£è¯´æ˜çš„åŒ…ï¼
## å‘å¸ƒ
ä¸€ä¸ªç‰ˆæœ¬åªèƒ½å‘å¸ƒä¸€æ¬¡ï¼Œä¸ºäº†é¿å…æ¯æ¬¡æ‰‹åŠ¨ä¿®æ”¹package.json, å¯ä»¥ä½¿ç”¨npm version [major | minor | patch]å‘½ä»¤æ¥æ›´æ–°package.jsoné‡Œçš„ç‰ˆæœ¬

## æ‰“æ ‡ç­¾
å‡è®¾ä½ çš„åŒ…æœ€æ–°ç‰ˆæœ¬æ˜¯1.0.0, å½“ç”¨æˆ·yarn add my-awesome-packageæˆ–yarn add my-awesome-package@1.0.0æ—¶ï¼Œå…¶å®æ˜¯ç›¸å½“äºyarn add my-awesome-package@latest, å³ä¸æŒ‡å®šæ ‡ç­¾å®‰è£…æ—¶ï¼Œé»˜è®¤å®‰è£…latestç‰ˆæœ¬ã€‚
å‡è®¾ä½ æ­£åœ¨å¼€å‘2.0.0ç‰ˆæœ¬ï¼Œå®ƒè¿˜ä¸ç¨³å®šï¼Œä½ æƒ³å‘å¸ƒå®ƒè®©ç”¨æˆ·æµ‹è¯•ä¸€æ³¢ï¼Œæ­¤æ—¶åˆä¸èƒ½è®©å®ƒå˜æˆlatestç‰ˆæœ¬ï¼Œä¸ç„¶ç”¨æˆ·yarn add my-awesome-packageæ—¶å°±å®‰è£…äº†2.0.0äº†ï¼Œé‚£å°†è®©ç”¨æˆ·å´©æºƒã€‚è¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ
æ ‡ç­¾å°±ç”¨ä¸Šåœºäº†ã€‚å¯ä»¥è¿™æ ·å‘å¸ƒ
```
npm publish --tag beta
```
åˆ™ç”¨æˆ· **yarn add my-awesome-package** å®‰è£…çš„æ˜¯1.0.0ç‰ˆæœ¬ï¼Œ **yarn add my-awesome-package@beta**æ—¶ï¼Œå®‰è£…çš„æ˜¯2.0.0ç‰ˆæœ¬ï¼Œä¸å½±å“è€ç”¨æˆ·ï¼Œæ£’ï¼ğŸ‰è®°ä½ï¼Œä½ åªèƒ½å¯¹ä¸€ä¸ªç‰ˆæœ¬æ‰“ä¸€ä¸ªæ ‡ç­¾ï¼Œä½¿ç”¨npm dist-tag ls å¯ä»¥æŸ¥çœ‹npmåŒ…ä¸€å…±æ‰“äº†å‡ ä¸ªæ ‡ç­¾
## æ‰“åŒ…Vue
è„šæ‰‹æ¶ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œåœ¨Vue Confä¸Šæ‰¾åˆ°ä¸€ä¸ªvueç»„ä»¶çš„æ‰“åŒ…è„šæ‰‹æ¶(vueå®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰è¯´æ˜)ï¼Œè¿›è¡Œâ€œæœ¬åœŸåŒ–â€ä¿®æ”¹å®Œå–„åï¼Œå·²åœ¨githubå¼€æºï¼šgithub.com/FEMessage/vâ€¦
### è¯´æ˜
æˆ‘ä»¬ä»¥å¼€æºç»„ä»¶[el-data-table](https://github.com/FEMessage/el-data-table)ä¸ºä¾‹ï¼Œè§£é‡Šç›®å½•ç»“æ„åŠæ–‡ä»¶
â”œâ”€â”€ README.md
â”œâ”€â”€ build
â”‚   â””â”€â”€ rollup.config.js
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ el-data-table.esm.js
â”‚   â”œâ”€â”€ el-data-table.min.js
â”‚   â””â”€â”€ el-data-table.umd.js
â”œâ”€â”€ docs
â”‚   â”œâ”€â”€ build
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ el-data-table.vue
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ styleguide.config.js
â”œâ”€â”€ test
â”‚   â””â”€â”€ index.test.js
â””â”€â”€ yarn.lockå¤åˆ¶ä»£ç å…ˆæ¥çœ‹ä¸‰ä¸ªæ–‡ä»¶:README.mdpackage.jsonyarn.lockREADME.mdä¸package.jsonå¤§å®¶éƒ½æ‡‚ï¼Œæœ‰yarn.lockå› ä¸ºæ˜¯æˆ‘ä»¬é¼“åŠ±å¤§å®¶ä½¿ç”¨yarn,  å®ƒæ¯”npmæ›´å¿«ã€‚è™½ç„¶npm 6.0å·ç§°æé€Ÿ17å€(å¯ä»¥æƒ³è±¡6ä¹‹å‰æ˜¯å¾—æœ‰å¤šæ…¢ğŸ˜‚)ï¼Œä½†ç»æµ‹è¯•ï¼Œè¿˜æ˜¯ä¸å¦‚yarnæ¥ä¸‹æ¥çœ‹build, dist, src ç›®å½•â”œâ”€â”€ build
â”‚   â””â”€â”€ rollup.config.js
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ el-data-table.esm.js
â”‚   â”œâ”€â”€ el-data-table.min.js
â”‚   â””â”€â”€ el-data-table.umd.js
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ el-data-table.vue
â”‚   â””â”€â”€ index.jså¤åˆ¶ä»£ç build ç›®å½•ä¸‹æ”¾ç¼–è¯‘æ—¶çš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªè·Ÿvue-cli 2.xç”Ÿæˆçš„æ¨¡æ¿buildç›®å½•ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™é‡Œæ”¾ç½®çš„æ˜¯rollup.config.jsã€‚è‡³äºä¸ºä»€ä¹ˆç”¨Rollup, ä¸€æ˜¯å› ä¸ºé…ç½®æ›´ç®€å•ï¼ŒäºŒæ˜¯å› ä¸ºå®ƒæ›´é€‚åˆæ‰“åŒ…ç±»åº“ï¼Œå½“æºæ–‡ä»¶ä¸­æœ‰import lib from 'awesome-lib'ç±»ä¼¼çš„ä»£ç æ—¶ï¼ŒRollupå¹¶ä¸ä¼šæŠŠawesome-libæ†ç»‘è¾“å‡ºï¼Œè¿™æ­£æ˜¯å¼€å‘ç±»åº“æˆ–ç»„ä»¶éœ€è¦çš„ç‰¹æ€§




## Vue.use
åœ¨ç»„ä»¶åº“çš„index.jsä¸­å¯¼å‡ºç»„ä»¶
```
export default {
    install
    component1,
    component2,
    ...
}
```
åœ¨ä½¿ç”¨æ—¶ main.jsä¸­
```
import XX from 'XX'
Vue.use(XX)
```
å…¶ä¸­XXå³å¯¼å‡ºçš„å¯¹è±¡ï¼ŒVue.useä¼šæ‰§è¡ŒXX.installæ–¹æ³•,installæ–¹æ³•ä¼šéå†æ‰€æœ‰ç»„ä»¶å¹¶æ³¨å†Œåˆ°Vueä¸­

